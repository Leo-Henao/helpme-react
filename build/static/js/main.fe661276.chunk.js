(this["webpackJsonpfront-end-delitos"]=this["webpackJsonpfront-end-delitos"]||[]).push([[0],{10:function(e,t,a){},33:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a(7),l=a.n(c);a(10);const n={roleExiste(e){if(null!=sessionStorage.getItem("user")){const t=JSON.parse(sessionStorage.getItem("user"));if(t){if(t.user){const a=t.user.access_token;return JSON.parse(atob(a.split(".")[1])).authorities.includes(e)}return!1}return!1}return!1}},r=Object(s.createContext)(),o={login:"[auth] login",logout:"[auth] logout"},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.login:return{...t.payload,logged:!0};case o.logout:return{logged:!1};default:return e}};var d=a(0);const m="user",j="token",b=()=>JSON.parse(sessionStorage.getItem(m))||{logged:!1};function u(e){let{children:t}=e;const[a,c]=Object(s.useReducer)(i,{},b),[l,o]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{sessionStorage.setItem(m,JSON.stringify(a)),a.user&&sessionStorage.setItem(j,a.user.access_token);const e=n.roleExiste("ROLE_ADMIN");o(e)}),[a]),Object(d.jsx)(r.Provider,{value:{user:a,dispatch:c,isAdmin:l},children:t})}var h=a(3);a(33);function p(e){let{year:t}=e;return Object(d.jsx)("footer",{className:"footer mt-auto py-3",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("span",{className:"text-muted",children:["IUDigital \xa9 ",t]})})})}var x=a(5),O=a(23);const g=a.n(O).a.create({baseURL:"http://localhost:8084/api/v1"});g.interceptors.response.use((e=>e),(e=>(e&&e.response&&(401===e.response.status||403===e.response.status)&&(localStorage.clear(),sessionStorage.clear()),Promise.reject(e))));const f={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+btoa("HelpmeIud:123456")},N=async e=>{const t=new URLSearchParams;return t.set("grant_type","password"),t.set("username",e.username),t.set("password",e.password),await g.post("http://localhost:8084/api/v1/oauth/token",t,{headers:f})},v=()=>{console.log("logout auth service"),sessionStorage.clear()};a(52);function w(){const[e,t]=Object(s.useState)(!0),a=Object(h.p)(),{user:{user:c},dispatch:l,isAdmin:n}=Object(s.useContext)(r);return Object(d.jsxs)("nav",{id:"navbar-example2",className:"navbar navbar-expand-lg navbar-light bg-light px-3",children:[c&&Object(d.jsx)(x.b,{to:"/private/profile",className:"navbar-brand",tabIndex:0,"aria-label":"Ir al Inicio",children:"HelpMeIUD"}),!c&&Object(d.jsx)(x.b,{to:"/login",className:"navbar-brand",tabIndex:0,"aria-label":"Ir al Inicio",children:"HelpMeIUD"}),Object(d.jsx)("button",{className:"custom-toggler navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample09","aria-controls":"navbarsExample09","aria-expanded":!e,"aria-label":"Toggle navigation",onClick:()=>t(!e),children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsx)("div",{className:"".concat(e?"collapse":""," navbar-collapse"),id:"navbarsExample09",children:Object(d.jsxs)("ul",{className:"navbar-nav",children:[!c&&Object(d.jsx)(x.c,{tabIndex:1,"data-target":"#",className:"nav-item nav-link",to:"/login",children:"Login"}),!c&&Object(d.jsx)(x.c,{tabIndex:2,className:"nav-item nav-link",to:"/register",children:"Registro"}),Object(d.jsx)(x.c,{tabIndex:3,className:"nav-item nav-link",to:"/public/map",children:"Mapa"}),c&&Object(d.jsx)(x.c,{className:"nav-item nav-link",to:"/private/report",children:"Reportar"}),c&&n&&Object(d.jsx)(x.c,{className:"nav-item nav-link",to:"/private/delitos",children:"Delitos"}),Object(d.jsx)(x.c,{tabIndex:4,className:"nav-item nav-link",to:"/public/about",children:"Acerca"}),c&&Object(d.jsxs)("li",{className:"nav-item dropdown logout",children:[Object(d.jsx)("a",{className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",href:"#",role:"button","aria-expanded":"false",children:c.nombre}),Object(d.jsxs)("ul",{className:"dropdown-menu",children:[Object(d.jsx)(x.c,{className:"dropdown-item",to:"/private/profile",children:"Mi Perfil"}),Object(d.jsx)("li",{children:Object(d.jsx)("hr",{className:"dropdown-divider"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{className:"dropdown-item",href:"#",onClick:e=>{e.preventDefault(),a("/login",{replace:!0}),l({type:o.logout}),v()},children:"  Salir"})})]})]})]})})]})}var y=a(8),S=a.n(y);const _=async()=>{g.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("token"));return(await g.get("/usuarios/profile")).data},k=async e=>{g.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("token"));return console.log(e),await g.put("/usuarios/profile",e)},C=async e=>{g.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("token"));const t=new FormData;t.append("image",e);return(await g.post("/usuarios/upload",t)).data},E={LOGIN_INCORRECTO:"Error al intentar ingresar",ERROR_REGISTRO:"Hubo un error al intentar registrarse",ERROR_GENERAL:"Hubo un error",CREDS_INVALIDAS:"Credenciales inv\xe1lidas",REG_EXITOSO:"Registro exitoso",CHANGE_EXITOSO:"Edici\xf3n exitosa",ERROR_MODIFICAR:"Error al intentar modificar",ERROR_REGISTRO_CASO:"Error al registrar caso"};a(53);const I="http://localhost:8084/api/v1/usuarios/upload/img",R="".concat(I,"/default.jpg"),A={nombre:"",apellido:"",fecha_nacimiento:"",image:"",imageSrc:R};function D(){const[e,t]=Object(s.useState)(!1),[a,c]=Object(s.useState)(A),[l,n]=Object(s.useState)({nombre:"",apellido:"",password:"",fecha_nacimiento:""}),[r,o]=Object(s.useState)(!0);Object(s.useEffect)((()=>{const e=new Image;e.src=a.imageSrc,e.onload=()=>o(!1)}),[a.imageSrc]),Object(s.useEffect)((()=>{let e=!0;return(async()=>{try{const t=await _();t.roles&&delete t.roles;let a={...t};a.imageSrc=t.image?t.image.startsWith("http")?t.image:"".concat(I,"/").concat(t.image):R,e&&c(a)}catch(t){console.error(t)}})(),()=>{e=!1}}),[]);const i=Object(s.useCallback)((()=>{const e={};let t=!0;return a.nombre||(t=!1,e.nombre="Nombre requerido"),a.apellido||(t=!1,e.apellido="Apellido requerido"),a.fecha_nacimiento||(t=!1,e.fecha_nacimiento="Fecha requerida"),n(e),t}),[a]),m=e=>{c({...a,[e.target.name]:e.target.value})};return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"col-md-7 col-lg-8 my-3",children:[Object(d.jsxs)("label",{id:"labelimage",children:[Object(d.jsx)("img",{src:a.imageSrc,alt:"Imagen de perfil",className:"avatar"}),(e||r)&&Object(d.jsx)("div",{className:"spinner-grow spinner-grow-lg",role:"status",children:Object(d.jsx)("span",{className:"sr-only",children:"Cargando..."})}),Object(d.jsx)("div",{id:"camera",children:Object(d.jsx)("i",{className:"fas fa-camera"})}),Object(d.jsx)("input",{type:"file",accept:"image/*",id:"fileimage",onChange:async e=>{e.preventDefault(),t(!0);try{const t=e.target.files[0],a=URL.createObjectURL(t);c((e=>({...e,image:t,imageSrc:a}))),await C(t)}catch(e){console.error(e)}finally{t(!1)}}})]}),Object(d.jsxs)("form",{className:"needs-validation",onSubmit:async e=>{if(e.preventDefault(),i()){t(!0);try{await k(a),c({...a}),e.target[5].checked=!1,S.a.fire("OK","Cambios guardados exitosamente","success")}catch(e){var s,l;const t=(null===(s=e.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||"Error al modificar";S.a.fire("Error",t,"error")}finally{t(!1)}}},autoComplete:"off",children:[Object(d.jsxs)("div",{className:"row g-3",children:[Object(d.jsxs)("div",{className:"col-sm-6",children:[Object(d.jsxs)("label",{htmlFor:"nombre",className:"form-label",children:["Nombre ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"nombre",placeholder:"Juanito",name:"nombre",value:a.nombre,onChange:m,required:!0}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:l.nombre})]}),Object(d.jsxs)("div",{className:"col-sm-6",children:[Object(d.jsxs)("label",{htmlFor:"apellido",className:"form-label",children:["Apellido ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"apellido",placeholder:"Doe",name:"apellido",value:a.apellido,onChange:m,required:!0}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:l.apellido})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"username",className:"form-label",children:["Email ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"username",placeholder:"you@example.com",name:"username",value:a.username||"",disabled:!0})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"password",className:"form-label",children:["Contrase\xf1a ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password",name:"password",value:a.password||"",onChange:m,required:!0,autoComplete:"new-password"}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:l.password})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"fecha_nacimiento",className:"form-label",children:["Fecha de Nacimiento ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"date",className:"form-control",id:"fecha_nacimiento",name:"fecha_nacimiento",value:a.fecha_nacimiento,onChange:m,required:!0}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:l.fecha_nacimiento})]})]}),Object(d.jsx)("hr",{className:"my-4"}),Object(d.jsxs)("button",{type:"submit",className:"btn btn-primary w-50 btn-lg button-standard",disabled:e,children:[e&&Object(d.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Enviar"]})]})]})})}const F=()=>g.get("/delitos"),q=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("token")),await g.post("http://localhost:8084/api/v1/casos",e)};var L=a(12);let M;class T extends s.Component{constructor(e){super(e),this.state={map:null,maps:null,center:{lat:59.95,lng:30.33},zoom:11},this.handleApiLoaded=(e,t)=>{this.setState({map:e}),this.setState({maps:t})},this._onClickMap=e=>{console.log(e),console.log(this.state.map),console.log(this.state.maps);const t={lat:e.lat,lng:e.lng};M?(console.log(t),M.setPosition(t)):M=new this.state.maps.Marker({position:t,draggable:!0,label:t.lat+", "+t.lng,map:this.state.map,streetViewControl:!0}),this.props.onClickMap(e,this.state.map)},this.getLocation=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):console.log("Geolocation is not supported by this browser.")},this.showPosition=e=>{this.setState({center:{lat:e.coords.latitude,lng:e.coords.longitude}})},this.componentDidMount=()=>{this.getLocation()}}render(){return Object(d.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(d.jsx)(L.a,{bootstrapURLKeys:{key:"AIzaSx000Xxxx_deoizso8PffuxqjiixxxxxXxX"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,draggable:"true",yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:t,maps:a}=e;return this.handleApiLoaded(t,a)},onClick:this._onClickMap})})}}var P=T;function U(){const e=Object(s.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=new Date,a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear()-e;return"".concat(c,"-").concat(s,"-").concat(a)}),[]),{user:{user:t}}=Object(s.useContext)(r),[a,c]=Object(s.useState)(!1),[l,n]=Object(s.useState)([]),[o,i]=Object(s.useState)({mapa:"",descripcion:"",delito_id:""}),[m,j]=Object(s.useState)({fecha_hora:"",latitud:0,longitud:0,altitud:0,descripcion:"",url_mapa:"",rmi_url:"",delito_id:0}),[b]=Object(s.useState)({maxDate:e()});Object(s.useEffect)((()=>{(async()=>{try{const e=await F();n(e.data)}catch(e){console.error("Error fetching delitos:",e)}})()}),[e]);const u=Object(s.useCallback)(((e,t)=>{const a={lat:e.lat,lng:e.lng};j((e=>({...e,latitud:a.lat,longitud:a.lng,rmi_url:t.rmiUrl,url_mapa:t.mapUrl})))}),[]),h=Object(s.useCallback)((()=>{const t={};let a=!0;return m.descripcion||(a=!1,t.descripcion="Descripci\xf3n requerida"),m.fecha_hora>e()&&(t.fecha_hora="No puede ser mayor a hoy"),m.url_mapa||(a=!1,t.mapa="Ubique un punto en el mapa"),m.delito_id||(a=!1,t.delito_id="Seleccione delito"),i(t),a}),[m,e]),p=Object(s.useCallback)((async e=>{if(e.preventDefault(),h()){c(!0);try{await q(m),j({fecha_hora:"",latitud:0,longitud:0,altitud:0,descripcion:"",url_mapa:"",rmi_url:"",delito_id:0}),S.a.fire("OK",E.REG_EXITOSO,"success")}catch(t){console.error("Error creating caso:",t),S.a.fire("Error",E.ERROR_REGISTRO_CASO,"error")}finally{c(!1)}}}),[m,h]),x=Object(s.useCallback)((e=>{j((t=>({...t,[e.target.name]:e.target.value})))}),[]),O=Object(s.useCallback)((e=>{j((t=>({...t,delito_id:e.target.value})))}),[]),g=Object(s.useMemo)((()=>o),[o]);return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"col-md-12 col-lg-12 mb-6",children:[Object(d.jsx)("h4",{className:"mb-3",children:"Reportar caso"}),Object(d.jsxs)("form",{className:"needs-validation",onSubmit:p,children:[Object(d.jsxs)("div",{className:"row clear",children:[Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"fecha_hora",className:"form-label",children:["Fecha del suceso ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{max:b.maxDate,type:"datetime-local",className:"form-control",id:"fecha_hora",name:"fecha_hora",value:m.fecha_hora,onChange:x}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:g.fecha_hora})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsx)("div",{className:"invalid-feedback d-block",children:g.mapa}),Object(d.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(d.jsx)(P,{onClickMap:u})}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:g.mapa})]})]}),Object(d.jsxs)("div",{className:"row my-4",children:[Object(d.jsxs)("div",{className:"col-sm-6 col-lg-6",children:[Object(d.jsxs)("label",{htmlFor:"delito_id",className:"form-label",children:["Delito ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsxs)("select",{className:"form-control",id:"delito_id",name:"delito_id",onChange:O,required:!0,children:[Object(d.jsx)("option",{value:"",children:" -- Selecciona delito -- "}),l.map((e=>Object(d.jsx)("option",{value:e.id,children:e.nombre},e.id)))]}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:g.delito_id})]}),Object(d.jsxs)("div",{className:"col-sm-6",children:[Object(d.jsxs)("label",{htmlFor:"descripcion",className:"form-label",children:["Descripci\xf3n ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"descripcion",placeholder:"Descripci\xf3n breve",name:"descripcion",value:m.descripcion,onChange:x,required:!0}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:g.descripcion})]}),Object(d.jsx)("hr",{className:"my-1"}),Object(d.jsxs)("button",{disabled:a,className:"w-50 btn btn-primary btn-lg button-standard",type:"submit",children:[a&&Object(d.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Enviar"]})]})]})]})})}function G(){return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"d-none",children:"None"}),Object(d.jsx)("h2",{children:"403 No Autorizado!"}),Object(d.jsxs)("figure",{className:"figure",children:[Object(d.jsx)("img",{width:"50%",src:"https://www.elsoldeacapulco.com.mx/incoming/xsdneb-nino-que-llora-desconsolado./ALTERNATES/LANDSCAPE_1140/Ni%C3%B1o%20que%20llora%20desconsolado.",className:"figure-img img-fluid rounded d-block",alt:""}),Object(d.jsx)("figcaption",{className:"figure-caption mx-auto",children:"No est\xe1s autorizado!"})]})]})}function z(e){let{title:t}=e;return Object(d.jsx)("div",{className:"modal fade",id:"exampleModalToggle","aria-hidden":"true","aria-labelledby":"exampleModalToggleLabel",tabIndex:-1,children:Object(d.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(d.jsxs)("div",{className:"modal-content",children:[Object(d.jsxs)("div",{className:"modal-header",children:[Object(d.jsx)("h5",{className:"modal-title",id:"exampleModalToggleLabel",children:t}),Object(d.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(d.jsx)("div",{className:"modal-body",children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"name",className:"form-label",children:"Nombre"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"name","aria-describedby":"name"}),Object(d.jsx)("div",{id:"name",className:"form-text",children:"We'll never share your email with anyone else."})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"description",className:"form-label",children:"Descripci\xf3n"}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"description"})]})]})}),Object(d.jsx)("div",{className:"modal-footer",children:Object(d.jsx)("button",{className:"btn btn-primary",children:"Enviar"})})]})})})}function H(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(z,{title:"Agregar Delito"})})}var B=a(25),X=a.n(B);const J=e=>{let{data:t}=e;return Object(d.jsx)("div",{className:"table-responsive mb-5",children:Object(d.jsxs)("table",{className:"table",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{scope:"col",children:"Id"}),Object(d.jsx)("th",{scope:"col",children:"Nombre"}),Object(d.jsx)("th",{scope:"col",children:"Descripci\xf3n"}),Object(d.jsx)("th",{scope:"col",children:"Agregado por"}),Object(d.jsx)("th",{scope:"col"})]})}),Object(d.jsx)("tbody",{children:t.map((e=>{let{id:t,nombre:a,descripcion:s,agregadoPor:c}=e;return Object(d.jsxs)("tr",{className:"table-active",children:[Object(d.jsx)("th",{scope:"row",children:t}),Object(d.jsx)("td",{children:a}),Object(d.jsx)("td",{children:s}),Object(d.jsx)("td",{children:c}),Object(d.jsxs)("td",{children:[Object(d.jsx)("button",{className:"btn btn-outline-primary",title:"Editar",children:Object(d.jsx)("i",{className:"fa fa-edit"})}),Object(d.jsx)("button",{className:"btn btn-outline-danger",title:"Eliminar este",children:Object(d.jsx)("i",{className:"fa fa-trash-alt"})})]})]},t)}))})]})})},K=e=>{let{tableRef:t}=e;return Object(d.jsx)("button",{className:"btn btn-outline-primary",title:"Imprimir PDF",onClick:()=>{const e=new X.a("p","mm","a4");e.fromHTML(t.current,15,15,{width:170}),e.save("report.pdf")},children:Object(d.jsx)("i",{className:"fas fa-print"})})};function Y(){const{isAdmin:e}=Object(s.useContext)(r),t=Object(s.useRef)();return Object(d.jsxs)(d.Fragment,{children:[e?Object(d.jsxs)("div",{className:"container",ref:t,children:[Object(d.jsx)(J,{data:[{id:1,nombre:"Hurto",descripcion:"cuando se quitan pertenencias",agregadoPor:"julio"},{id:2,nombre:"Acoso Sexual",descripcion:"Groser\xedas a una persona",agregadoPor:"julio"}]}),Object(d.jsx)("button",{"data-bs-toggle":"modal",href:"#exampleModalToggle",className:"btn btn-outline-success",title:"Agregar nuevo",children:Object(d.jsx)("i",{className:"fas fa-plus-circle"})}),Object(d.jsx)(K,{tableRef:t})]}):Object(d.jsx)(G,{}),Object(d.jsx)(H,{})]})}function W(){return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("h1",{className:"d-none",children:"None"}),Object(d.jsx)("h2",{children:"404 No Found!"}),Object(d.jsxs)("figure",{className:"figure",children:[Object(d.jsx)("img",{width:"50%",src:"https://memecrunch.com/meme/33SOY/i-found-it/image.jpg?w=640&c=1",className:"figure-img img-fluid rounded d-block",alt:""}),Object(d.jsx)("figcaption",{className:"figure-caption mx-auto",children:"No se encuentra recurso!"})]})]})}function V(){return Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/delitos",element:Object(d.jsx)(Y,{})}),Object(d.jsx)(h.b,{path:"/report",element:Object(d.jsx)(U,{})}),Object(d.jsx)(h.b,{path:"/profile",element:Object(d.jsx)(D,{})}),Object(d.jsx)(h.b,{path:"*",element:Object(d.jsx)(W,{})})]})}function Z(e){let{children:t}=e;return t}function Q(e){const{title:t,texto:a,subtitle:c,src:l}=e,[n,r]=Object(s.useState)(!0);return Object(s.useEffect)((()=>{const e=new Image;e.src=l,e.onload=()=>{r(!1)}}),[l]),Object(d.jsxs)("div",{className:"card",children:[Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h5",{className:"card-title",children:t}),Object(d.jsx)("p",{className:"card-text",children:a}),Object(d.jsx)("p",{className:"card-text",children:Object(d.jsx)("small",{className:"text-muted",children:c})})]}),n?Object(d.jsx)("div",{className:"spinner-border m-5",role:"status",children:Object(d.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(d.jsx)("img",{src:"",...e,alt:"",className:"image"})]})}const $=[{id:1,title:"\xbfQuienes somos?",texto:"HelmeIUD nace para combatir la violencia, los hechos que no son noticia y quedan impunes...",subtitle:"HelmeIUD",src:"https://www.iudigital.edu.co/images/Noticias/2024/Boletin_19/Danilo%20y%20su%20familia.webp"},{id:2,title:"Proyecto",texto:"Ayudar en comunidad a estar prevenidos por la ola de violencia que asota la ciudad en los distintos sitios...",subtitle:"Unidos somos m\xe1s",src:"https://www.iudigital.edu.co/images/Noticias/2024/Boletin_17/Banner_Alexandra.webp"}];function ee(){return Object(d.jsx)("div",{className:"container my-3",children:Object(d.jsx)("div",{className:"row row-cols-1 row-cols-md-3 g-4 needs-validation",children:$.map((e=>Object(d.jsx)("div",{className:"col",children:Object(d.jsx)(Q,{title:e.title,texto:e.texto,subtitle:"HelmeIUD",src:e.src})},e.id)))})})}const te=e=>{let{text:t,url:a,nombre:s,lat:c,lng:l}=e;return Object(d.jsx)("i",{className:"fas fa-user-secret",style:{color:"red",background:"white"},"data-toggle":"tooltip","data-placement":"top",title:"".concat(t," en: ").concat(c,", ").concat(l),children:Object(d.jsx)("a",{href:"".concat("https://www.google.com/maps/search/?api=1&query=").concat(c,",").concat(l),target:"_blank",children:s})})};class ae extends s.Component{constructor(){super(...arguments),this.state={map:null,maps:null,center:{lat:6.2440159,lng:-75.5762419},zoom:11,locations:[]},this.handleApiLoaded=(e,t)=>{this.setState({map:e}),this.setState({maps:t})},this.getLocation=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):console.log("Geolocation is not supported by this browser.")},this.showPosition=e=>{console.log(e),this.setState({center:{lat:e.coords.latitude,lng:e.coords.longitude}})},this.componentDidMount=()=>{this.getLocation(),g.get("/casos").then((e=>{console.log(e.data),this.setState({locations:e.data})})).catch((e=>{console.log(e)}))}}render(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{style:{height:"100vh",width:"100%",marginBottom:"10vh"},children:Object(d.jsx)(L.a,{bootstrapURLKeys:{key:"AIzaSx000Xxxx_deoizso8PffuxqjiixxxxxXxX"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:t,maps:a}=e;return this.handleApiLoaded(t,a)},children:this.state.locations.map(((e,t)=>Object(d.jsx)(te,{lat:e.latitud,lng:e.longitud,text:e.descripcion,url:e.urlMap,nombre:e.nombre},t)))})})})}}var se=ae;function ce(){return Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/map",element:Object(d.jsx)(se,{})}),Object(d.jsx)(h.b,{path:"/about",element:Object(d.jsx)(ee,{})}),Object(d.jsx)(h.b,{path:"*",element:Object(d.jsx)(W,{})})]})}function le(e){let{children:t}=e;const{user:a}=Object(s.useContext)(r);return a.logged?t:Object(d.jsx)(h.a,{to:"/login"})}function ne(e){let{children:t}=e;const{user:a}=Object(s.useContext)(r);return a.logged?Object(d.jsx)(h.a,{to:"/private/profile"}):t}function re(){const e=Object(h.p)(),{dispatch:t}=Object(s.useContext)(r),[a,c]=Object(s.useState)(!1),[l,n]=Object(s.useState)({username:"",password:""}),[i,m]=Object(s.useState)({username:"",password:""}),j=Object(s.useCallback)((()=>{const e={};let t=!0;if(l.username){const a=l.username.lastIndexOf("@"),s=l.username.lastIndexOf(".");a<s&&a>0&&s>2&&l.username.length-s>2||(t=!1,e.username="Email no v\xe1lido")}else t=!1,e.username="Email requerido";return l.password||(t=!1,e.password="Contrase\xf1a requerida"),m(e),t}),[l]),b=Object(s.useCallback)((a=>{a.preventDefault(),j()&&(c(!0),N(l).then((a=>{const s=localStorage.getItem("lastPath")||"/private/profile";t({type:o.login,payload:{user:a.data}}),e(s,{replace:!0})})).catch((e=>{const{data:t}=e.response||{},a=(null===t||void 0===t?void 0:t.message)||E.CREDS_INVALIDAS;S.a.fire("Error",a,"error")})).finally((()=>{c(!1)})))}),[j,l,t,e]),u=Object(s.useCallback)((e=>{n((t=>({...t,[e.target.name]:e.target.value})))}),[]),p=Object(s.useMemo)((()=>i),[i]);return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"col-md-7 col-lg-8 my-3",children:[Object(d.jsx)("h4",{className:"mb-3",children:"Ingresa"}),Object(d.jsxs)("form",{onSubmit:b,children:[Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",className:"form-label",children:"Email"}),Object(d.jsx)("input",{autoComplete:"off",name:"username",onChange:u,required:!0,type:"text",className:"form-control",id:"username","aria-describedby":"emailHelp",value:l.username}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:p.username})]}),Object(d.jsxs)("div",{className:"mb-3",children:[Object(d.jsx)("label",{htmlFor:"password",className:"form-label",children:"Contrase\xf1a"}),Object(d.jsx)("input",{autoComplete:"new-password",name:"password",onChange:u,required:!0,type:"password",className:"form-control",id:"password",value:l.password}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:p.password})]}),Object(d.jsxs)("button",{disabled:a,type:"submit",className:"btn btn-primary button-standard",children:[a&&Object(d.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Enviar"]})]}),Object(d.jsx)(x.b,{to:"/register",children:Object(d.jsx)("p",{children:"\xbfNo est\xe1s registrado?"})})]})})}const oe={"Content-Type":"application/json"},ie=async e=>(console.log(e),await g.post("/usuarios/signup",e,{headers:oe}));function de(){const e=e=>{var t=new Date,a=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),c=t.getFullYear()-e;return t=c+"-"+s+"-"+a},[t]=Object(s.useState)({maxDate:e(0),minDate:e(110)}),[a,c]=Object(s.useState)(!1),[l,n]=Object(s.useState)({nombre:"",apellido:"",username:"",password:"",fecha_nacimiento:"",image:"https://d500.epimg.net/cincodias/imagenes/2016/07/04/lifestyle/1467646262_522853_1467646344_noticia_normal.jpg"}),[r,o]=Object(s.useState)({nombre:"",apellido:"",username:"",password:"",fecha_nacimiento:""}),[i,m]=Object(s.useState)(!1),j=e=>{n({...l,[e.target.name]:e.target.value})};return Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"col-md-7 col-lg-8 my-3",children:[Object(d.jsx)("h1",{className:"d-none",children:"1"}),Object(d.jsx)("h2",{className:"d-none",children:"2"}),Object(d.jsx)("h3",{className:"d-none",children:"3"}),Object(d.jsx)("h4",{className:"mb-3",children:"Reg\xedstrate"}),Object(d.jsxs)("form",{className:"needs-validation",onSubmit:e=>{e.preventDefault(),c(!0),(()=>{let e={},t=!0;if(l.nombre?e.nombre="":(t=!1,e.nombre="Nombre requerido"),l.apellido?e.apellido="":(t=!1,e.apellido="Apellido requerido"),l.username)if("undefined"!==typeof l.username&&""!==l.username){let a=l.username.lastIndexOf("@"),s=l.username.lastIndexOf(".");a<s&&a>0&&-1===l.username.indexOf("@@")&&s>2&&l.username.length-s>2||(t=!1,e.username="Email no v\xe1lido")}else e.username="";else t=!1,e.username="Email requerido";return l.password?e.password="":(t=!1,e.password="Contrase\xf1a requerida"),l.fecha_nacimiento?e.fecha_nacimiento="":(t=!1,e.fecha_nacimiento="Fecha requerida"),o({...e}),t})()&&ie(l).then((t=>(n({nombre:"",apellido:"",username:"",password:"",fecha_nacimiento:"",image:"https://d500.epimg.net/cincodias/imagenes/2016/07/04/lifestyle/1467646262_522853_1467646344_noticia_normal.jpg"}),m(!1),e.target[5].checked=!1,c(!1),S.a.fire("OK",E.REG_EXITOSO,"success")))).catch((e=>{const{data:t}=e.response;return console.log(t),c(!1),t.message?S.a.fire("Error",t.message,"error"):S.a.fire("Error",E.ERROR_REGISTRO,"error")}))},autocomplete:"off",children:[Object(d.jsxs)("div",{className:"row g-3",children:[Object(d.jsxs)("div",{className:"col-sm-6",children:[Object(d.jsxs)("label",{htmlFor:"nombre",className:"form-label",children:["Nombre",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"nombre",placeholder:"Juanito",required:"",name:"nombre",value:l.nombre,onChange:j}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:r.nombre})]}),Object(d.jsxs)("div",{className:"col-sm-6",children:[Object(d.jsxs)("label",{htmlFor:"apellido",className:"form-label",children:["Apellido",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"text",className:"form-control",id:"apellido",placeholder:"Doe",required:"",name:"apellido",value:l.apellido,onChange:j}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:r.apellido})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"username",className:"form-label",children:["Email ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"email",className:"form-control",id:"username",placeholder:"you@example.com",name:"username",value:l.username,onChange:j,autoComplete:"off"}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:r.username})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"password",className:"form-label",children:["Contrase\xf1a",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"",required:"",name:"password",value:l.password,onChange:j,autocomplete:"off"}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:r.password})]}),Object(d.jsxs)("div",{className:"col-12",children:[Object(d.jsxs)("label",{htmlFor:"fecha_nacimiento",className:"form-label",children:["Fecha de Nacimiento ",Object(d.jsx)("span",{className:"text-muted",children:"*"})]}),Object(d.jsx)("input",{max:t.maxDate,min:t.minDate,type:"date",className:"form-control",id:"fecha_nacimiento",name:"fecha_nacimiento",value:l.fecha_nacimiento,onChange:j}),Object(d.jsx)("div",{className:"invalid-feedback d-block",children:r.fecha_nacimiento})]})]}),Object(d.jsx)("hr",{className:"my-4"}),Object(d.jsxs)("div",{className:"form-check",children:[Object(d.jsx)("input",{type:"checkbox",className:"form-check-input",id:"save-info",onChange:()=>{m(!i)}}),Object(d.jsxs)("label",{className:"form-check-label",htmlFor:"save-info",children:["Aceptar ",Object(d.jsx)("a",{href:"https://iudigital.edu.co",children:" t\xe9rminos y condiciones "})]})]}),Object(d.jsx)("hr",{className:"my-4"}),Object(d.jsxs)("button",{disabled:a?1:!i,type:"submit",className:"btn btn-primary w-50 btn-lg button-standard",children:[a&&Object(d.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Enviar"]})]}),Object(d.jsx)(x.b,{to:"/login",children:Object(d.jsx)("p",{children:"\xbfYa est\xe1s registrado?"})})]})})}function me(){return Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/",element:Object(d.jsx)(h.a,{to:"/login",replace:!0})}),Object(d.jsx)(h.b,{path:"/login",element:Object(d.jsx)(re,{})}),Object(d.jsx)(h.b,{path:"/register",element:Object(d.jsx)(de,{})}),Object(d.jsx)(h.b,{path:"/noauthorized",element:Object(d.jsx)(G,{})}),Object(d.jsx)(h.b,{path:"*",element:Object(d.jsx)(W,{})})]})}function je(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(w,{}),Object(d.jsx)("main",{className:"flex-shrink-0 mb-7",children:Object(d.jsxs)(h.d,{children:[Object(d.jsx)(h.b,{path:"/*",element:Object(d.jsx)(ne,{children:Object(d.jsx)(me,{})})}),Object(d.jsx)(h.b,{path:"public/*",element:Object(d.jsx)(Z,{children:Object(d.jsx)(ce,{})})}),Object(d.jsx)(h.b,{path:"/private/*",element:Object(d.jsx)(le,{children:Object(d.jsx)(V,{})})})]})}),Object(d.jsx)(p,{year:(new Date).getFullYear()})]})}var be=function(){return Object(d.jsx)(u,{children:Object(d.jsx)(je,{})})};a(58).config(),l.a.render(Object(d.jsx)(x.a,{children:Object(d.jsx)(be,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.fe661276.chunk.js.map